display:
  - platform: st7701s
    id: ${device_name}_display

    # XXX DEBUG
    show_test_card: true
    # lambda: |-
    #   it.fill(Color::WHITE);

    auto_clear_enabled: true
    update_interval: 5s
    spi_mode: MODE3
    data_rate: 10MHz
    color_order: BGR
    dimensions:
      width: 480
      height: 480
    invert_colors: true
    transform:
      mirror_x: true
      mirror_y: true
    cs_pin: 21
    de_pin: 39
    hsync_pin: 40 #16
    vsync_pin: 48 #17
    pclk_pin:
      number: 45
      ignore_strapping_warning: true
    init_sequence:
      # https://github.com/wireless-tag-com/ZX2D10GE01R-V4848/blob/ad21b3659527618fdd752cc0801b0a36f6c5e52c/main/screen.c
      - [0xFF, 0x77, 0x01, 0x00, 0x00, 0x13, 0xEF, 0x08]
      - [0xFF, 0x77, 0x01, 0x00, 0x00, 0x10]
      - [0xC0, 0x3B, 0x00]        # Scan line
      - [0xC1, 0x0B, 0x02]        # VBP
      - [0xC2, 0x07, 0x02]
      - [0xCC, 0x10]
      - [0xCD, 0x08]              # RGB format // ?565??? 666??
      - [0xB0, 0x00, 0x11, 0x16, 0x0e, 0x11, 0x06, 0x05, 0x09, 0x08, 0x21, 0x06, 0x13, 0x10, 0x29, 0x31, 0x18]   # IPS // 255 // 251 // 247 down // 239 // 231 // 203 // 175 // 147 // 108 // 80 // 52 // 24 // 16 // 8 down // 4 // 0
      - [0xB1, 0x00, 0x11, 0x16, 0x0e, 0x11, 0x07, 0x05, 0x09, 0x09, 0x21, 0x05, 0x13, 0x11, 0x2a, 0x31, 0x18]   # IPS // 255 // 251 // 247 down // 239 // 231 // 203 // 175 // 147 // 108 // 80 // 52 // 24 // 16 // 8 down // 4 // 0
      - [0xFF, 0x77, 0x01, 0x00, 0x00, 0x11]
      - [0xB0, 0x6d]              # VOP  3.5375+ *x 0.0125 // 5D
      - [0xB1, 0x37]              # VCOM amplitude setting
      - [0xB2, 0x81]              # VGH Voltage setting // 12V
      - [0xB3, 0x80]
      - [0xB5, 0x43]              # VGL Voltage setting // -8.3V
      - [0xB7, 0x85]
      - [0xB8, 0x20]
      - [0xC1, 0x78]
      - [0xC2, 0x78]
      - [0xD0, 0x88]
      - [0xE0, 0x00, 0x00, 0x02]
      - [0xE1, 0x03, 0xA0, 0x00, 0x00, 0x04, 0xA0, 0x00, 0x00, 0x00, 0x20, 0x20]
      - [0xE2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
      - [0xE3, 0x00, 0x00, 0x11, 0x00]
      - [0xE4, 0x22, 0x00]
      - [0xE5, 0x05, 0xEC, 0xA0, 0xA0, 0x07, 0xEE, 0xA0, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
      - [0xE6, 0x00, 0x00, 0x11, 0x00]
      - [0xE7, 0x22, 0x00]
      - [0xE8, 0x06, 0xED, 0xA0, 0xA0, 0x08, 0xEF, 0xA0, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00]
      - [0xEB, 0x00, 0x00, 0x40, 0x40, 0x00, 0x00, 0x00]
      - [0xED, 0xFF, 0xFF, 0xFF, 0xBA, 0x0A, 0xBF, 0x45, 0xFF, 0xFF, 0x54, 0xFB, 0xA0, 0xAB, 0xFF, 0xFF, 0xFF]
      - [0xEF, 0x10, 0x0D, 0x04, 0x08, 0x3F, 0x1F]
      - [0xFF, 0x77, 0x01, 0x00, 0x00, 0x13]
      - [0xEF, 0x08]
      - [0xFF, 0x77, 0x01, 0x00, 0x00, 0x00]
      - [0x36, 0x00]
      - [0x3A, 0x66]              # 55/50=16bit(RGB565);66=18bit(RGB666);77?????3AH?=24bit(RGB888)
      - [0x11]

    hsync_pulse_width: 10
    hsync_back_porch:  10
    hsync_front_porch: 10
    vsync_pulse_width:  2
    vsync_back_porch:  12
    vsync_front_porch: 14
    pclk_frequency: 15MHz
    pclk_inverted: false
    data_pins:
      red:
        - number: 10        #R1
        - number: 16        #R2
        - number: 9         #R3
        - number: 15        #R4
        - number: 46        #R5
          ignore_strapping_warning: true
      green:
        - number: 8         #G0
        - number: 13        #G1
        - number: 18        #G2
        - number: 12        #G3
        - number: 11        #G4
        - number: 17        #G5
      blue:
        - number: 47        #B1
          allow_other_uses: true
        - number: 41        #B2
          allow_other_uses: true
        - number: 0         #B3
          ignore_strapping_warning: true
        - number: 42        #B4
        - number: 14        #B5
